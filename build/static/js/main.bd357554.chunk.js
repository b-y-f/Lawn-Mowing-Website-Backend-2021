(this["webpackJsonplawn-mowing-website-frontend-2021"]=this["webpackJsonplawn-mowing-website-frontend-2021"]||[]).push([[0],{220:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(62),i=n.n(c),o=n(26),s=n(2),l=n.n(s),u=n(5),d=n(63),j=n(14),b=n(145),p=(n(186),n(221),b.a.initializeApp({apiKey:"AIzaSyDxuQBc8Xu5uPvgH-ohhrb9sG5FVypt-aQ",authDomain:"auth-dev-53c9b.firebaseapp.com",projectId:"auth-dev-53c9b",storageBucket:"auth-dev-53c9b.appspot.com",messagingSenderId:"963517141086",appId:"1:963517141086:web:96690c9cd16ce40ef6a4cf"})),h=p.auth(),m=n(1),x=r.a.createContext();function O(){return Object(a.useContext)(x)}function f(e){var t=e.children,n=Object(a.useState)(),r=Object(j.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!0),s=Object(j.a)(o,2),l=s[0],u=s[1];Object(a.useEffect)((function(){return h.onAuthStateChanged((function(e){i(e),u(!1)}))}),[]);var d={currentUser:c,signup:function(e,t){return h.createUserWithEmailAndPassword(e,t)},login:function(e,t){return h.signInWithEmailAndPassword(e,t)},logout:function(){return h.signOut()},forgotPassword:function(e){return h.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return Object(m.jsx)(x.Provider,{value:d,children:!l&&t})}var v=n(33),g=n(55),w=n(36),y=function(e,t){return function(n){n({type:"SET_MESSAGE",message:e}),setTimeout((function(){n({type:"SET_MESSAGE",message:null})}),1e3*t),clearTimeout(undefined)}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.message;default:return e}},N=n(314),S=n(327),A=n(290),L=n(307),I=n(308),E=n(315),T=n(291),C=n(322),W=n(325),D=n(320),z=n(127),P=n(318),R=n(326),U=Object(z.a)();function B(){var e,t,n,a,r=Object(w.b)(),c=Object(d.a)(),i=c.handleSubmit,s=c.register,j=c.formState.errors,b=O().login,p=Object(v.g)(),h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t.email,t.password);case 3:n=e.sent,console.log("login good!",n),r(y({type:"success",text:"login good!"},5)),p.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(y({type:"error",text:"The password is invalid or the user does not have a password."},5));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(P.a,{theme:U,children:Object(m.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"primary.main"}}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Login"}),Object(m.jsxs)(T.a,{component:"form",noValidate:!0,onSubmit:i(h),sx:{mt:3},children:[Object(m.jsxs)(E.a,{container:!0,spacing:2,children:[Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)({error:"pattern"===(null===(e=j.email)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=j.email)||void 0===t?void 0:t.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},s("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(m.jsxs)(E.a,{item:!0,xs:12,children:[Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({error:"minLength"===(null===(n=j.password)||void 0===n?void 0:n.type)&&!0,helperText:"minLength"===(null===(a=j.password)||void 0===a?void 0:a.type)&&"At least 6 charactor long.",fullWidth:!0},s("password",{required:!0,minLength:6})),{},{label:"Password",type:"password",id:"password"})),Object(m.jsx)(g.b,{to:"/forgot-password",children:Object(m.jsx)(W.a,{variant:"caption",children:"Forgot Password?"})})]}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(R.a,{control:Object(m.jsx)(I.a,{value:"allowExtraEmails",color:"primary"}),label:"Remember me"})})]}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Login"}),Object(m.jsx)(E.a,{container:!0,justifyContent:"flex-end",children:Object(m.jsx)(E.a,{item:!0,children:Object(m.jsx)(g.b,{to:"/signup",children:Object(m.jsx)(W.a,{variant:"body2",children:"Need an account? Sign up"})})})})]})]})]})})}var G=n(328),Z=n(329),_=n(330);function q(e){var t=e.bookings,n={weekday:"long",year:"numeric",month:"long",day:"numeric"};return Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsxs)(G.a,{className:"",style:{margin:20},children:[Object(m.jsx)(Z.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(C.a,{gutterBottom:!0,variant:"h6",component:"h3",children:new Date(e.date).toLocaleDateString("nz",n)}),Object(m.jsxs)(C.a,{variant:"body2",color:"textSecondary",component:"p",children:[Object(m.jsx)("ul",{children:e.serviceItem.map((function(e){return Object(m.jsx)("li",{children:e.item},e._id)}))}),"comments: ",e.comment,"address: ",e.address]})]})}),Object(m.jsxs)(_.a,{children:[Object(m.jsx)(S.a,{size:"small",color:"primary",children:"Approve"}),Object(m.jsx)(S.a,{size:"small",color:"secondary",children:"Decline"})]})]},e.id)}))})}var M=n(60),V=n.n(M),F=null,K=function(e){F="bearer ".concat(e)},$="/api/users",H={getAll:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:F}},e.next=3,V.a.get($,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.post($,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e){var t={headers:{Authorization:F}};return V.a.put($,e,t).then((function(e){return e.data}))},remove:function(e){return V.a.delete("".concat($,"/").concat(e)).then((function(e){return e.data}))}},J=Object(z.a)();function Q(){var e,t,n,a,r,c,i,s,j=Object(w.b)(),b=O().signup,p=Object(d.a)(),h=p.handleSubmit,x=p.register,f=p.formState.errors,k=Object(v.g)(),I=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t.email,t.password);case 3:return n=e.sent,e.next=6,H.create({uid:n.user.uid,email:t.email,firstName:t.firstName,lastName:t.lastName});case 6:j(y({type:"success",text:"Sign up successful!"},5)),k.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j(y({type:"error",text:"The email address is already in use by another account."},5));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(P.a,{theme:J,children:Object(m.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"secondary.main"}}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(m.jsxs)(T.a,{component:"form",noValidate:!0,onSubmit:h(I),sx:{mt:3},children:[Object(m.jsxs)(E.a,{container:!0,spacing:2,children:[Object(m.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({error:"pattern"===(null===(e=f.firstName)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=f.firstName)||void 0===t?void 0:t.type)&&"Have to be alphabet."},x("firstName",{required:!0,pattern:/^[A-Za-z]+$/i})),{},{fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0}))}),Object(m.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(o.a)({error:"pattern"===(null===(n=f.lastName)||void 0===n?void 0:n.type)&&!0,helperText:"pattern"===(null===(a=f.lastName)||void 0===a?void 0:a.type)&&"Have to be alphabet.",required:!0,fullWidth:!0,id:"lastName",label:"Last Name"},x("lastName",{required:!0,pattern:/^[A-Za-z]+$/i})))}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)({error:"pattern"===(null===(r=f.email)||void 0===r?void 0:r.type)&&!0,helperText:"pattern"===(null===(c=f.email)||void 0===c?void 0:c.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},x("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({error:"minLength"===(null===(i=f.password)||void 0===i?void 0:i.type)&&!0,helperText:"minLength"===(null===(s=f.password)||void 0===s?void 0:s.type)&&"At least 6 characters long.",fullWidth:!0},x("password",{required:!0,minLength:6})),{},{label:"Password",type:"password",id:"password"}))})]}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(m.jsx)(E.a,{container:!0,justifyContent:"flex-end",children:Object(m.jsx)(E.a,{item:!0,children:Object(m.jsx)(g.b,{to:"/login",children:Object(m.jsx)(W.a,{variant:"body2",children:"Already have an account? Sign in"})})})})]})]})]})})}var X=Object(z.a)();function Y(){var e,t,n=Object(d.a)(),a=n.handleSubmit,r=n.register,c=n.formState.errors,i=O().forgotPassword,s=Object(v.g)(),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(t.email);case 3:n=e.sent,console.log("ok",n),s.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(P.a,{theme:X,children:Object(m.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"primary.main"}}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Reset password"}),Object(m.jsxs)(T.a,{component:"form",noValidate:!0,onSubmit:a(j),sx:{mt:3},children:[Object(m.jsx)(E.a,{container:!0,spacing:2,children:Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)({error:"pattern"===(null===(e=c.email)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=c.email)||void 0===t?void 0:t.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},r("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))})}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"reset password"})]})]})]})})}var ee=n(85),te=n(323),ne=n(128),ae=n(150),re="/api/bookings",ce=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.get(re);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.get("".concat(re,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe={getAll:ce,create:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:F}},e.next=3,V.a.post(re,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.put("".concat(re,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.delete("".concat(re,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getById:ie},se=n(300),le=n(306),ue=n(299),de=n(298);function je(e){return{type:"INIT_BOOKINGS",bookings:e}}function be(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe.remove(e);case 2:a=t.sent,console.log(a),n({type:"REMOVE_BOOKING",removeBookingId:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function pe(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe.create(e);case 2:a=t.sent,n({type:"NEW_BOOKING",newBooking:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BOOKINGS":return t.bookings;case"NEW_BOOKING":return e.concat(t.newBooking);case"REMOVE_BOOKING":return e.filter((function(e){return e.id!==t.removeBookingId}));default:return e}};function me(){var e=Object(w.b)(),t=Object(a.useState)(new Date(Date.now()+864e5)),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(d.a)(),s=i.register,b=i.setValue,p=i.reset,h=i.handleSubmit,x=i.watch,O=(i.control,i.formState.errors,function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k){t.next=2;break}return t.abrupt("return",alert("Pls check at least one service"));case 2:a={address:n.address,bookingDate:n.bookingDate,serviceItem:v.map((function(e){var t=e.name,a=e.noteName;if(n[t])return{item:e.name,serviceComment:n[a]}})).filter((function(e){return void 0!==e}))},e(pe(a)),e(y({type:"success",text:"Create new booking OK!!"},5)),p();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f=Object(ae.usePlacesWidget)({apiKey:"AIzaSyBBlILNR1xPhaLTiQxXvK4uP_YkayR4Pcc",options:{types:["address"],fields:["formatted_address"],componentRestrictions:{country:"nz"}}}).ref,v=[{label:"Lawn Mowing",name:"lawnMowing",noteName:"noteLawnMowing"},{label:"Garbage Collect",name:"garbageCollect",noteName:"noteGarbageCollect"},{label:"Gardening",name:"gardening",noteName:"noteGardening"},{label:"Landscaping",name:"landscaping",noteName:"noteLandscaping"},{label:"Gutter Clean",name:"gutterCleansing",noteName:"noteGutterCleansing"},{label:"Trimming & Pruning",name:"trimmingPruning",noteName:"noteTrimmingPruning"}],g=function(e){return x(e,!1)},k=x(v.map((function(e){return e.name})),!1).every((function(e){return!1===e}));return Object(m.jsx)(de.b,{dateAdapter:ue.a,children:Object(m.jsx)(T.a,{sx:{display:"flex",flexWrap:"wrap","& > :not(style)":{m:1,width:1}},children:Object(m.jsx)(te.a,{elevation:1,children:Object(m.jsx)("form",{onSubmit:h(O),children:Object(m.jsxs)(se.a,{spacing:1,children:[Object(m.jsx)(le.a,Object(o.a)(Object(o.a)({renderInput:function(e){return Object(m.jsx)(L.a,Object(o.a)({},e))},label:"Date&Time picker",value:r},s("bookingDate",{required:!0})),{},{onChange:function(e){b("bookingDate",e.format()),c(e.format())}})),Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({},s("address",{required:!0})),{},{inputProps:{ref:f},label:"Where to service",variant:"outlined"})),v.map((function(e,t){return Object(m.jsxs)(se.a,{direction:"row",spacing:2,alignItems:"flex-start",children:[Object(m.jsx)(R.a,Object(o.a)(Object(o.a)({checked:g(e.name)||!1},s(e.name)),{},{label:e.label,control:Object(m.jsx)(I.a,{})})),g(e.name)&&Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({},s(e.noteName)),{},{variant:"outlined",label:"Notes for ".concat(e.label,"(Optional)")}))]},t)})),Object(m.jsx)(L.a,{id:"note",label:"Notes",variant:"outlined"}),Object(m.jsxs)(se.a,{direction:"row",spacing:2,justifyContent:"center",children:[Object(m.jsx)(S.a,{type:"submit",variant:"contained",color:"success",children:"Add"}),Object(m.jsx)(S.a,{variant:"contained",color:"error",onClick:function(){p()},children:"Cancel"})]})]})})})})})}var xe=n(4),Oe=n(11),fe=n(332),ve=n(333),ge=n(334),we=n(331),ye=n(153),ke=n.n(ye),Ne=n(154),Se=n.n(Ne),Ae=n(324),Le=n(311),Ie=n(303),Ee=n(317),Te=n(93),Ce=n.n(Te),We=n(152),De=n.n(We),ze=n(77),Pe=n(313),Re=n(302),Ue=[{value:"date",label:"Date"},{value:"name",label:"Worker Name"},{value:"address",label:"Address"}],Be=[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}];function Ge(e){var t=e.handleSearch,n=e.handleSort,r=Object(a.useState)("desc"),c=Object(j.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)("date"),l=Object(j.a)(s,2),u=l[0],d=l[1];return Object(m.jsxs)(Re.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:.8}},noValidate:!0,autoComplete:"off",children:[Object(m.jsx)(L.a,{id:"outlined-basic",label:"Search address",variant:"outlined",onChange:function(e){return t(e.target.value)}}),Object(m.jsx)(L.a,{id:"outlined-select-currency",select:!0,label:"Order by",value:u,onChange:function(e){d(e.target.value),n(i,e.target.value)},children:Ue.map((function(e){return Object(m.jsx)(Pe.a,{value:e.value,children:e.label},e.value)}))}),Object(m.jsx)(L.a,{id:"outlined-select-currency",select:!0,label:"Order",value:i,onChange:function(e){o(e.target.value),n(e.target.value,u)},children:Be.map((function(e){return Object(m.jsx)(Pe.a,{value:e.value,children:e.label},e.value)}))})]})}var Ze=Object(Oe.a)((function(e){e.expand;var t=Object(ee.a)(e,["expand"]);return Object(m.jsx)(we.a,Object(o.a)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));function _e(){var e=Object(a.useState)({search:"",sort:"desc",sortBy:"date"}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(w.c)((function(e){var t;return t="desc"===n.sort?function(e){return e.sort((function(e,t){return new Date(t.bookingDate)-new Date(e.bookingDate)}))}(e.bookings):function(e){return e.sort((function(e,t){return new Date(e.bookingDate)-new Date(t.bookingDate)}))}(e.bookings),""!==n.search&&n.search.length>1?t.filter((function(e){return e.address.toLowerCase().includes(n.search)})):t})),i=Object(w.b)(),s=Object(a.useState)(!1),d=Object(j.a)(s,2),b=d[0],p=d[1],h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to cancel this booking?")){e.next=6;break}return e.next=3,oe.remove(t);case 3:n=e.sent,i(be(t)),i(y({type:"success",text:n.message},5));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)(Ge,{handleSearch:function(e){""!==e&&r(Object(o.a)(Object(o.a)({},n),{},{search:e}))},handleSort:function(e,t){console.log(e,t),r(Object(o.a)(Object(o.a)({},n),{},{sort:e,sortBy:t}))}}),Object(m.jsxs)(Ae.a,{children:[Object(m.jsx)("h2",{children:"Booking List"}),c.map((function(e,t){return Object(m.jsx)(Le.a,{children:Object(m.jsxs)(G.a,{sx:{width:1},children:[Object(m.jsx)(fe.a,{action:Object(m.jsx)(we.a,{"aria-label":"delete",onClick:function(){return h(e.id)},children:Object(m.jsx)(De.a,{sx:{color:ze.a[600]}})}),title:Ce()(e.bookingDate).format("LL"),subheader:Ce()(e.bookingDate).format("LT")}),Object(m.jsx)(_.a,{children:Object(m.jsxs)(C.a,{paragraph:!0,children:[e.address," "]})}),Object(m.jsxs)(ve.a,{disableSpacing:!0,children:[Object(m.jsx)(we.a,{"aria-label":"add to favorites",children:Object(m.jsx)(ke.a,{})}),Object(m.jsx)(Ee.a,{label:e.status,color:"primary",variant:"outlined"}),Object(m.jsx)(Ze,{expand:b[t],onClick:function(){return e=t,void p(Object(o.a)(Object(o.a)({},b),{},Object(xe.a)({},e,!b[e])));var e},"aria-expanded":b[t],"aria-label":"show more",children:Object(m.jsx)(Se.a,{})})]}),Object(m.jsx)(ge.a,{in:b[t],timeout:"auto",unmountOnExit:!0,children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(C.a,{paragraph:!0,children:"Services you picked:"}),e.serviceItem.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(C.a,{variant:"overline",paragraph:!0,children:e.item}),Object(m.jsx)(C.a,{variant:"body2",paragraph:!0,children:e.serviceComment}),Object(m.jsx)(Ie.a,{})]},e.item)})),e.worker&&Object(m.jsxs)(C.a,{variant:"body2",color:"text.secondary",align:"right",children:["Worker: ",e.worker]}),e.adminComment&&Object(m.jsxs)(C.a,{paragraph:!0,children:["Admin comment:",e.adminComment]})]})})]})},t)}))]})]})}var qe=Object(ne.a)(),Me={minHeight:600,width:360,margin:"20px auto",textAlign:"center"};function Ve(){var e=O().currentUser,t=Object(w.b)();return Object(a.useEffect)((function(){function n(){return(n=Object(u.a)(l.a.mark((function n(){var a,r,c,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getIdToken();case 2:return a=n.sent,K(a),n.next=6,H.getAll();case 6:return r=n.sent,c=r.bookings,i=Object(ee.a)(r,["bookings"]),t(je(c)),window.localStorage.setItem("userInfo",JSON.stringify(i)),n.next=12,Object(ne.b)(qe.currentUser,{displayName:r.firstName,photoURL:r.photoURL});case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,t]),Object(m.jsx)("div",{children:Object(m.jsxs)(te.a,{elevation:3,style:Me,children:[Object(m.jsx)(me,{}),Object(m.jsx)(_e,{})]})})}function Fe(e){var t=e.component,n=Object(ee.a)(e,["component"]),a=O().currentUser;return Object(m.jsx)(v.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(o.a)({},e)):Object(m.jsx)(v.a,{to:"/login"})}}))}var Ke=n(336),$e=n(337),He=n(158),Je=n(309),Qe=n(335),Xe=function(){var e=Object(w.c)((function(e){return e.message})),t=null===e||void 0===e?void 0:e.text;switch(null===e||void 0===e?void 0:e.type){case"error":return Object(m.jsx)(Je.a,{severity:"error",children:Object(m.jsx)(Qe.a,{children:t})});case"warning":return Object(m.jsx)(Je.a,{severity:"warning",children:Object(m.jsx)(Qe.a,{children:t})});case"info":return Object(m.jsx)(Je.a,{severity:"info",children:Object(m.jsx)(Qe.a,{children:t})});case"success":return Object(m.jsx)(Je.a,{severity:"success",children:Object(m.jsx)(Qe.a,{children:t})});default:return Object(m.jsx)(m.Fragment,{})}};function Ye(){var e,t=Object(w.c)((function(e){return e.message})),n=O(),a=n.currentUser,c=n.logout,i=r.a.useState(null),o=Object(j.a)(i,2),s=o[0],d=o[1],b=Object(v.g)();function p(){return(p=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(null),e.prev=1,e.next=4,c();case 4:b.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(m.jsx)(Re.a,{sx:{flexGrow:1},children:Object(m.jsxs)(Ke.a,{children:[Object(m.jsxs)($e.a,{children:[Object(m.jsx)(we.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(m.jsx)(C.a,{onClick:function(){return b.push("/")},variant:"h6",component:"div",sx:{flexGrow:1},children:"Bookings"}),a&&Object(m.jsxs)("div",{children:[Object(m.jsx)(we.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:Object(m.jsx)(C.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:(null===a||void 0===a?void 0:a.photoURL)?Object(m.jsx)(N.a,{src:a.photoURL}):Object(m.jsx)(N.a,{children:null===a||void 0===a||null===(e=a.displayName)||void 0===e?void 0:e.charAt(0).toUpperCase()})})}),Object(m.jsxs)(He.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(s),onClose:function(){d(null)},children:[Object(m.jsx)(Pe.a,{onClick:function(){d(null),b.push("/profile")},children:"Profile"}),Object(m.jsx)(Pe.a,{onClick:function(){return p.apply(this,arguments)},children:"Logout"})]})]})]}),Object(m.jsx)(Xe,{message:t})]})})}var et=Object(z.a)();function tt(){O().currentUser;var e,t,n,r,c,i,s,j,b,p,h,x,f=Object(d.a)(),g=f.handleSubmit,k=f.register,I=f.formState.errors,W=f.setValue,z=Object(v.g)(),R=Object(w.b)();Object(a.useEffect)((function(){var e=window.localStorage.getItem("userInfo"),t=JSON.parse(e);console.log("userInfo",t),W("firstName",t.firstName),W("lastName",t.lastName),W("phone",t.phone),W("email",t.email),W("lastName",t.lastName),W("photoURL",t.photoURL)}),[W]);var U=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("edit profile form data",t),e.next=4,H.update({firstName:t.firstName,lastName:t.lastName,phone:t.phone,photoURL:t.photoURL});case 4:R(y({type:"success",text:"profile updated!"},5)),z.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),R(y({type:"error",text:"Failed"},5));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(P.a,{theme:et,children:Object(m.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(T.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"secondary.main"}}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Profile"}),Object(m.jsxs)(T.a,{component:"form",noValidate:!0,onSubmit:g(U),sx:{mt:3},children:[Object(m.jsxs)(E.a,{container:!0,spacing:2,children:[Object(m.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({error:"pattern"===(null===(e=I.firstName)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=I.firstName)||void 0===t?void 0:t.type)&&"Have to be alphabet."},k("firstName",{pattern:/^[A-Za-z]+$/i})),{},{fullWidth:!0,id:"firstName",label:"First Name"}))}),Object(m.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(o.a)({error:"pattern"===(null===(n=I.lastName)||void 0===n?void 0:n.type)&&!0,helperText:"pattern"===(null===(r=I.lastName)||void 0===r?void 0:r.type)&&"Have to be alphabet.",fullWidth:!0,id:"lastName",label:"Last Name"},k("lastName",{pattern:/^[A-Za-z]+$/i})))}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)({error:"pattern"===(null===(c=I.email)||void 0===c?void 0:c.type)&&!0,helperText:"pattern"===(null===(i=I.email)||void 0===i?void 0:i.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},k("email",{pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)({error:"minLength"===(null===(s=I.phone)||void 0===s?void 0:s.type)&&!0,helperText:"minLength"===(null===(j=I.phone)||void 0===j?void 0:j.type)&&"Input at least 6 digit.",fullWidth:!0,id:"phone",label:"Phone number"},k("phone",{minLength:6})))}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({error:"minLength"===(null===(b=I.password)||void 0===b?void 0:b.type)&&!0,helperText:"minLength"===(null===(p=I.password)||void 0===p?void 0:p.type)&&"At least 6 charactor long.",fullWidth:!0},k("password",{minLength:6})),{},{label:"Password",type:"password",id:"password"}))}),Object(m.jsx)(E.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(o.a)(Object(o.a)({error:"pattern"===(null===(h=I.photoURL)||void 0===h?void 0:h.type)&&!0,helperText:"pattern"===(null===(x=I.photoURL)||void 0===x?void 0:x.type)&&"Pls input valid url.",fullWidth:!0},k("photoURL",{pattern:/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi})),{},{label:"Avatar URL",type:"photoURL",id:"photoURL"}))})]}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"update"})]})]})]})})}var nt=n(155),at=n.n(nt),rt=n(321),ct=n(305),it=n(304);function ot(e){var t=e.children,n=e.window,a=Object(it.a)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return Object(m.jsx)(ct.a,{in:a,children:Object(m.jsx)(Re.a,{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}var st=function(e){var t=e.props;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(f,{children:[Object(m.jsx)(A.a,{}),Object(m.jsx)("div",{id:"back-to-top-anchor"}),Object(m.jsx)(Ye,{}),Object(m.jsxs)(D.a,{maxWidth:"sm",style:{marginTop:80},children:[Object(m.jsxs)(v.d,{children:[Object(m.jsx)(Fe,{exact:!0,path:"/",component:Ve}),Object(m.jsx)(Fe,{path:"/profile",component:tt}),Object(m.jsx)(v.b,{path:"/signup",component:Q}),Object(m.jsx)(v.b,{path:"/login",component:B}),Object(m.jsx)(v.b,{path:"/forgot-password",component:Y}),Object(m.jsx)(v.b,{path:"/admin",component:q})]}),Object(m.jsx)(ot,Object(o.a)(Object(o.a)({},t),{},{children:Object(m.jsx)(rt.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(m.jsx)(at.a,{})})}))]})]})})},lt=n(94),ut=n(156),dt=n(157),jt=Object(lt.combineReducers)({message:k,bookings:he}),bt=Object(lt.createStore)(jt,Object(ut.composeWithDevTools)(Object(lt.applyMiddleware)(dt.a)));i.a.render(Object(m.jsx)(w.a,{store:bt,children:Object(m.jsx)(g.a,{children:Object(m.jsx)(st,{})})}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.bd357554.chunk.js.map