(this["webpackJsonplawn-mowing-website-frontend-2021"]=this["webpackJsonplawn-mowing-website-frontend-2021"]||[]).push([[0],{220:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(62),o=n.n(c),i=n(26),s=n(2),l=n.n(s),u=n(5),d=n(63),j=n(13),b=n(146),p=(n(186),n(221),b.a.initializeApp({apiKey:"AIzaSyDxuQBc8Xu5uPvgH-ohhrb9sG5FVypt-aQ",authDomain:"auth-dev-53c9b.firebaseapp.com",projectId:"auth-dev-53c9b",storageBucket:"auth-dev-53c9b.appspot.com",messagingSenderId:"963517141086",appId:"1:963517141086:web:96690c9cd16ce40ef6a4cf"})),h=p.auth(),m=n(1),x=r.a.createContext();function O(){return Object(a.useContext)(x)}function f(e){var t=e.children,n=Object(a.useState)(),r=Object(j.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!0),s=Object(j.a)(i,2),l=s[0],u=s[1];Object(a.useEffect)((function(){return h.onAuthStateChanged((function(e){o(e),u(!1)}))}),[]);var d={currentUser:c,signup:function(e,t){return h.createUserWithEmailAndPassword(e,t)},login:function(e,t){return h.signInWithEmailAndPassword(e,t)},logout:function(){return h.signOut()},forgotPassword:function(e){return h.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return Object(m.jsx)(x.Provider,{value:d,children:!l&&t})}var v=n(33),g=n(52),w=n(43),y=function(e,t){return function(n){n({type:"SET_MESSAGE",message:{show:!0,type:e.type,text:e.text}}),setTimeout((function(){n({type:"SET_MESSAGE",message:{show:!1,type:e.type,text:e.text}})}),1e3*t),clearTimeout(undefined)}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.message;default:return e}},N=n(318),S=n(331),A=n(293),L=n(309),I=n(310),C=n(319),E=n(294),T=n(326),W=n(329),z=n(324),D=n(127),B=n(322),P=n(330),R=Object(D.a)();function U(){var e,t,n,a,r=Object(w.b)(),c=Object(d.a)(),o=c.handleSubmit,s=c.register,j=c.formState.errors,b=O().login,p=Object(v.g)(),h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t.email,t.password);case 3:n=e.sent,console.log("login good!",n),r(y({type:"success",text:"login good!"},5)),p.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(y({type:"error",text:"The password is invalid or the user does not have a password."},5));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(B.a,{theme:R,children:Object(m.jsxs)(z.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(E.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"primary.main"}}),Object(m.jsx)(T.a,{component:"h1",variant:"h5",children:"Login"}),Object(m.jsxs)(E.a,{component:"form",noValidate:!0,onSubmit:o(h),sx:{mt:3},children:[Object(m.jsxs)(C.a,{container:!0,spacing:2,children:[Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)({error:"pattern"===(null===(e=j.email)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=j.email)||void 0===t?void 0:t.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},s("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(m.jsxs)(C.a,{item:!0,xs:12,children:[Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({error:"minLength"===(null===(n=j.password)||void 0===n?void 0:n.type)&&!0,helperText:"minLength"===(null===(a=j.password)||void 0===a?void 0:a.type)&&"At least 6 characters long.",fullWidth:!0},s("password",{required:!0,minLength:6})),{},{label:"Password",type:"password",id:"password"})),Object(m.jsx)(g.b,{to:"/forgot-password",children:Object(m.jsx)(W.a,{variant:"caption",children:"Forgot Password?"})})]}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(P.a,{control:Object(m.jsx)(I.a,{value:"allowExtraEmails",color:"primary"}),label:"Remember me"})})]}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Login"}),Object(m.jsx)(C.a,{container:!0,justifyContent:"flex-end",children:Object(m.jsx)(C.a,{item:!0,children:Object(m.jsx)(g.b,{to:"/signup",children:Object(m.jsx)(W.a,{variant:"body2",children:"Need an account? Sign up"})})})})]})]})]})})}var G=n(60),Z=n.n(G),_=null,V=function(e){_="bearer ".concat(e)},q="/api/users",M={getAll:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:_}},e.next=3,Z.a.get(q,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.post(q,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e){var t={headers:{Authorization:_}};return Z.a.put(q,e,t).then((function(e){return e.data}))},remove:function(e){return Z.a.delete("".concat(q,"/").concat(e)).then((function(e){return e.data}))}},H=Object(D.a)();function K(){var e,t,n,a,r,c,o,s,j=Object(w.b)(),b=O().signup,p=Object(d.a)(),h=p.handleSubmit,x=p.register,f=p.formState.errors,k=Object(v.g)(),I=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t.email,t.password);case 3:return n=e.sent,e.next=6,M.create({uid:n.user.uid,email:t.email,firstName:t.firstName,lastName:t.lastName});case 6:j(y({type:"success",text:"Sign up successful!"},5)),k.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j(y({type:"error",text:"The email address is already in use by another account."},5));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(B.a,{theme:H,children:Object(m.jsxs)(z.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(E.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"secondary.main"}}),Object(m.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(m.jsxs)(E.a,{component:"form",noValidate:!0,onSubmit:h(I),sx:{mt:3},children:[Object(m.jsxs)(C.a,{container:!0,spacing:2,children:[Object(m.jsx)(C.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({error:"pattern"===(null===(e=f.firstName)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=f.firstName)||void 0===t?void 0:t.type)&&"Have to be alphabet."},x("firstName",{required:!0,pattern:/^[A-Za-z]+$/i})),{},{fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0}))}),Object(m.jsx)(C.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(i.a)({error:"pattern"===(null===(n=f.lastName)||void 0===n?void 0:n.type)&&!0,helperText:"pattern"===(null===(a=f.lastName)||void 0===a?void 0:a.type)&&"Have to be alphabet.",required:!0,fullWidth:!0,id:"lastName",label:"Last Name"},x("lastName",{required:!0,pattern:/^[A-Za-z]+$/i})))}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)({error:"pattern"===(null===(r=f.email)||void 0===r?void 0:r.type)&&!0,helperText:"pattern"===(null===(c=f.email)||void 0===c?void 0:c.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},x("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({error:"minLength"===(null===(o=f.password)||void 0===o?void 0:o.type)&&!0,helperText:"minLength"===(null===(s=f.password)||void 0===s?void 0:s.type)&&"At least 6 characters long.",fullWidth:!0},x("password",{required:!0,minLength:6})),{},{label:"Password",type:"password",id:"password"}))})]}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(m.jsx)(C.a,{container:!0,justifyContent:"flex-end",children:Object(m.jsx)(C.a,{item:!0,children:Object(m.jsx)(g.b,{to:"/login",children:Object(m.jsx)(W.a,{variant:"body2",children:"Already have an account? Sign in"})})})})]})]})]})})}var F=Object(D.a)();function $(){var e,t,n=Object(d.a)(),a=n.handleSubmit,r=n.register,c=n.formState.errors,o=O().forgotPassword,s=Object(v.g)(),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t.email);case 3:n=e.sent,console.log("ok",n),s.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(B.a,{theme:F,children:Object(m.jsxs)(z.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(E.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"primary.main"}}),Object(m.jsx)(T.a,{component:"h1",variant:"h5",children:"Reset password"}),Object(m.jsxs)(E.a,{component:"form",noValidate:!0,onSubmit:a(j),sx:{mt:3},children:[Object(m.jsx)(C.a,{container:!0,spacing:2,children:Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)({error:"pattern"===(null===(e=c.email)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=c.email)||void 0===t?void 0:t.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},r("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))})}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"reset password"})]})]})]})})}var J=n(84),Q=n(128),Y=n(151),X=n(303),ee=n(308),te=n(302),ne=n(301),ae="/api/bookings",re=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get(ae);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("".concat(ae,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe={getAll:re,create:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:_}},e.next=3,Z.a.post(ae,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.put("".concat(ae,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.delete("".concat(ae,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getById:ce};function ie(e){return{type:"INIT_BOOKINGS",bookings:e}}function se(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe.remove(e);case 2:a=t.sent,console.log(a),n({type:"REMOVE_BOOKING",removeBookingId:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function le(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe.create(e);case 2:a=t.sent,n({type:"NEW_BOOKING",newBooking:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BOOKINGS":return t.bookings;case"NEW_BOOKING":return e.concat(t.newBooking);case"REMOVE_BOOKING":return e.filter((function(e){return e.id!==t.removeBookingId}));default:return e}};function de(e){var t=e.handleHideAddBookingButton,n=Object(w.b)(),r=Object(a.useState)(new Date(Date.now()+864e5)),c=Object(j.a)(r,2),o=c[0],s=c[1],b=Object(d.a)(),p=b.register,h=b.setValue,x=b.reset,O=b.handleSubmit,f=b.watch,v=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=2;break}return e.abrupt("return",n(y({type:"warning",text:"Please check at least one service!"},5)));case 2:a={address:t.address,bookingNote:t.bookingNote,bookingDate:t.bookingDate,serviceItem:k.map((function(e){var n=e.name,a=e.noteName;if(t[n])return{item:e.name,serviceComment:t[a]}})).filter((function(e){return void 0!==e}))},n(le(a)),n(y({type:"success",text:"Create new booking OK!!"},5)),x();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=Object(Y.usePlacesWidget)({apiKey:"AIzaSyBBlILNR1xPhaLTiQxXvK4uP_YkayR4Pcc",options:{types:["address"],fields:["formatted_address"],componentRestrictions:{country:"nz"}}}).ref,k=[{label:"Lawn Mowing",name:"lawnMowing",noteName:"noteLawnMowing"},{label:"Garbage Collect",name:"garbageCollect",noteName:"noteGarbageCollect"},{label:"Gardening",name:"gardening",noteName:"noteGardening"},{label:"Landscaping",name:"landscaping",noteName:"noteLandscaping"},{label:"Gutter Clean",name:"gutterCleansing",noteName:"noteGutterCleansing"},{label:"Trimming & Pruning",name:"trimmingPruning",noteName:"noteTrimmingPruning"}],N=function(e){return f(e,!1)},A=!!f(k.map((function(e){return e.name}))).includes(void 0)||f(k.map((function(e){return e.name})),!1).every((function(e){return!1===e}));console.log("noServiceSelected",A);return Object(m.jsx)(ne.b,{dateAdapter:te.a,children:Object(m.jsx)(E.a,{sx:{display:"flex",flexWrap:"wrap","& > :not(style)":{m:2,width:1}},children:Object(m.jsx)("form",{onSubmit:O(v),children:Object(m.jsxs)(X.a,{spacing:1,children:[Object(m.jsx)(ee.a,Object(i.a)(Object(i.a)({renderInput:function(e){return Object(m.jsx)(L.a,Object(i.a)({},e))},label:"Date&Time picker",value:o},p("bookingDate",{required:!0})),{},{onChange:function(e){h("bookingDate",e.format()),s(e.format())}})),Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({},p("address",{required:!0})),{},{inputProps:{ref:g},label:"Where to service",variant:"outlined"})),k.map((function(e,t){return Object(m.jsxs)(X.a,{direction:"row",spacing:2,alignItems:"flex-start",children:[Object(m.jsx)(P.a,Object(i.a)(Object(i.a)({checked:N(e.name)||!1},p(e.name)),{},{label:e.label,control:Object(m.jsx)(I.a,{})})),N(e.name)&&Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({},p(e.noteName)),{},{variant:"outlined",label:"Notes for ".concat(e.label,"(Optional)")}))]},t)})),Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({},p("bookingNote")),{},{id:"bookingNote",variant:"outlined"})),Object(m.jsxs)(X.a,{direction:"row",spacing:2,justifyContent:"center",children:[Object(m.jsx)(S.a,{type:"submit",variant:"contained",color:"success",children:"Add"}),Object(m.jsx)(S.a,{variant:"contained",color:"error",onClick:function(){x(),t()},children:"Cancel"})]})]})})})})}var je=n(4),be=n(10),pe=n(333),he=n(334),me=n(335),xe=n(336),Oe=n(337),fe=n(332),ve=n(154),ge=n.n(ve),we=n(313),ye=n(305),ke=n(328),Ne=n(314),Se=n(321),Ae=n(93),Le=n.n(Ae),Ie=n(153),Ce=n.n(Ie),Ee=n(77),Te=n(317),We=n(304),ze=[{value:"date",label:"Date"},{value:"name",label:"Worker Name"},{value:"address",label:"Address"}],De=[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}];function Be(e){var t=e.handleSearch,n=e.handleSort,r=Object(a.useState)("desc"),c=Object(j.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)("date"),l=Object(j.a)(s,2),u=l[0],d=l[1];return Object(m.jsxs)(We.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:.8}},noValidate:!0,autoComplete:"off",children:[Object(m.jsx)(L.a,{id:"outlined-basic",label:"Search address",variant:"outlined",onChange:function(e){return t(e.target.value)}}),Object(m.jsx)(L.a,{id:"outlined-select-currency",select:!0,label:"Order by",value:u,onChange:function(e){d(e.target.value),n(o,e.target.value)},children:ze.map((function(e){return Object(m.jsx)(Te.a,{value:e.value,children:e.label},e.value)}))}),Object(m.jsx)(L.a,{id:"outlined-select-currency",select:!0,label:"Order",value:o,onChange:function(e){i(e.target.value),n(e.target.value,u)},children:De.map((function(e){return Object(m.jsx)(Te.a,{value:e.value,children:e.label},e.value)}))})]})}var Pe=Object(be.a)((function(e){e.expand;var t=Object(J.a)(e,["expand"]);return Object(m.jsx)(fe.a,Object(i.a)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));function Re(){var e=Object(a.useState)({search:"",sort:"desc",sortBy:"date"}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(w.c)((function(e){var t;return t="desc"===n.sort?function(e){return e.sort((function(e,t){return new Date(t.bookingDate)-new Date(e.bookingDate)}))}(e.bookings):function(e){return e.sort((function(e,t){return new Date(e.bookingDate)-new Date(t.bookingDate)}))}(e.bookings),""!==n.search&&n.search.length>1?t.filter((function(e){return e.address.toLowerCase().includes(n.search)})):t}));console.log(c);var o=Object(w.b)(),s=Object(a.useState)(!1),d=Object(j.a)(s,2),b=d[0],p=d[1],h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to cancel this booking?")){e.next=6;break}return e.next=3,oe.remove(t);case 3:n=e.sent,o(se(t)),o(y({type:"success",text:n.message},5));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e,t,n){if("completed"===t)return Object(m.jsx)(we.a,{onChange:function(t,n){return function(e,t){oe.update(e,{rating:t}).then((function(e){o(y({type:"success",text:"Your rating has been updated!"},5))})).catch((function(e){console.log(e)}))}(e,n)},name:"half-rating",defaultValue:n,precision:.5})},O=function(e){var t;switch(console.log(e),e){case"pending":t="primary";break;case"completed":t="secondary";break;case"approved":t="success";break;case"declined":t="error"}return Object(m.jsx)(Se.a,{label:e,color:t,variant:"filled"})};return Object(m.jsxs)("div",{children:[Object(m.jsx)(Be,{handleSearch:function(e){""!==e&&r(Object(i.a)(Object(i.a)({},n),{},{search:e}))},handleSort:function(e,t){console.log(e,t),r(Object(i.a)(Object(i.a)({},n),{},{sort:e,sortBy:t}))}}),Object(m.jsxs)(ke.a,{children:[Object(m.jsx)("h2",{children:"Booking List"}),c.map((function(e,t){return Object(m.jsx)(Ne.a,{children:Object(m.jsxs)(pe.a,{sx:{width:1},children:[Object(m.jsx)(he.a,{action:Object(m.jsx)(fe.a,{"aria-label":"delete",onClick:function(){return h(e.id)},children:Object(m.jsx)(Ce.a,{sx:{color:Ee.a[600]}})}),title:Le()(e.bookingDate).format("LL"),subheader:Le()(e.bookingDate).format("LT")}),Object(m.jsx)(me.a,{children:Object(m.jsxs)(T.a,{paragraph:!0,children:[e.address," "]})}),Object(m.jsxs)(xe.a,{children:[Object(m.jsxs)(X.a,{direction:"row",spacing:2,children:[O(e.status),x(e.id,e.status,e.rating)]}),Object(m.jsx)(Pe,{expand:b[t],onClick:function(){return e=t,void p(Object(i.a)(Object(i.a)({},b),{},Object(je.a)({},e,!b[e])));var e},"aria-expanded":b[t],"aria-label":"show more",children:Object(m.jsx)(ge.a,{})})]}),Object(m.jsx)(Oe.a,{in:b[t],timeout:"auto",unmountOnExit:!0,children:Object(m.jsxs)(me.a,{children:[Object(m.jsx)(T.a,{paragraph:!0,children:"Services you picked:"}),e.serviceItem.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(T.a,{variant:"overline",paragraph:!0,children:e.item}),Object(m.jsx)(T.a,{variant:"body2",paragraph:!0,children:e.serviceComment})]},e.item)})),e.bookingNote&&(n=e.bookingNote,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ye.a,{}),Object(m.jsx)(T.a,{paragraph:!0,children:"Your Note on Booking:"}),n]})),0!==e.worker.length&&Object(m.jsxs)(T.a,{variant:"body2",color:"text.secondary",align:"right",children:["Worker: ",e.worker.join(", ")]}),e.adminComment&&Object(m.jsxs)(T.a,{paragraph:!0,children:["Admin comment:",e.adminComment]})]})})]})},t);var n}))]})]})}var Ue=n(327),Ge=n(155),Ze=n.n(Ge),_e=Object(Q.a)(),Ve={minHeight:600,width:360,margin:"20px auto",textAlign:"center"};function qe(){var e=O().currentUser,t=Object(w.b)(),n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!0),s=Object(j.a)(i,2),d=s[0],b=s[1];Object(a.useEffect)((function(){function n(){return(n=Object(u.a)(l.a.mark((function n(){var a,r,c,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getIdToken();case 2:return a=n.sent,V(a),n.next=6,M.getAll();case 6:return r=n.sent,c=r.bookings,o=Object(J.a)(r,["bookings"]),t(ie(c)),window.localStorage.setItem("userInfo",JSON.stringify(o)),n.next=12,Object(Q.b)(_e.currentUser,{displayName:r.firstName,photoURL:r.photoURL});case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,t]);return Object(m.jsx)("div",{children:Object(m.jsxs)(Ue.a,{elevation:3,style:Ve,children:[d&&Object(m.jsx)(S.a,{onClick:function(){b(!1),o(!0)},color:"success",sx:{m:2},variant:"contained",endIcon:Object(m.jsx)(Ze.a,{}),children:"add booking"}),Object(m.jsx)(Oe.a,{in:c,children:Object(m.jsx)(de,{handleHideAddBookingButton:function(){b(!d),o(!c)}})}),Object(m.jsx)(Re,{})]})})}function Me(e){var t=e.component,n=Object(J.a)(e,["component"]),a=O().currentUser;return Object(m.jsx)(v.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(i.a)({},e)):Object(m.jsx)(v.a,{to:"/login"})}}))}var He=n(338),Ke=n(339),Fe=n(159),$e=n(311),Je=n(315),Qe=function(){var e=Object(w.c)((function(e){return e.message})),t=null===e||void 0===e?void 0:e.show,n=null===e||void 0===e?void 0:e.text,a=null===e||void 0===e?void 0:e.type;return Object(m.jsx)(Je.a,{open:t,children:Object(m.jsx)($e.a,{severity:a,sx:{width:"100%"},children:n})})};function Ye(){var e,t=O(),n=t.currentUser,a=t.logout,c=r.a.useState(null),o=Object(j.a)(c,2),i=o[0],s=o[1],d=Object(v.g)();function b(){return(b=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),e.prev=1,e.next=4,a();case 4:d.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(m.jsx)(We.a,{sx:{flexGrow:1},children:Object(m.jsxs)(He.a,{children:[Object(m.jsxs)(Ke.a,{children:[Object(m.jsx)(fe.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(m.jsx)(T.a,{onClick:function(){return d.push("/")},variant:"h6",component:"div",sx:{flexGrow:1},children:"Bookings"}),n&&Object(m.jsxs)("div",{children:[Object(m.jsx)(fe.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:Object(m.jsx)(T.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:(null===n||void 0===n?void 0:n.photoURL)?Object(m.jsx)(N.a,{src:n.photoURL}):Object(m.jsx)(N.a,{children:null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e.charAt(0).toUpperCase()})})}),Object(m.jsxs)(Fe.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(i),onClose:function(){s(null)},children:[Object(m.jsx)(Te.a,{onClick:function(){s(null),d.push("/profile")},children:"Profile"}),Object(m.jsx)(Te.a,{onClick:function(){return b.apply(this,arguments)},children:"Logout"})]})]})]}),Object(m.jsx)(Qe,{})]})})}var Xe=Object(D.a)();function et(){O().currentUser;var e,t,n,r,c,o,s,j,b,p,h,x,f=Object(d.a)(),g=f.handleSubmit,k=f.register,I=f.formState.errors,W=f.setValue,D=Object(v.g)(),P=Object(w.b)();Object(a.useEffect)((function(){var e=window.localStorage.getItem("userInfo"),t=JSON.parse(e);console.log("userInfo",t),W("firstName",t.firstName),W("lastName",t.lastName),W("phone",t.phone),W("email",t.email),W("lastName",t.lastName),W("photoURL",t.photoURL)}),[W]);var R=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("edit profile form data",t),e.next=4,M.update({firstName:t.firstName,lastName:t.lastName,phone:t.phone,photoURL:t.photoURL});case 4:P(y({type:"success",text:"profile updated!"},5)),D.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),P(y({type:"error",text:"Failed"},5));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(B.a,{theme:Xe,children:Object(m.jsxs)(z.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(A.a,{}),Object(m.jsxs)(E.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(m.jsx)(N.a,{sx:{m:1,bgcolor:"secondary.main"}}),Object(m.jsx)(T.a,{component:"h1",variant:"h5",children:"Profile"}),Object(m.jsxs)(E.a,{component:"form",noValidate:!0,onSubmit:g(R),sx:{mt:3},children:[Object(m.jsxs)(C.a,{container:!0,spacing:2,children:[Object(m.jsx)(C.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({error:"pattern"===(null===(e=I.firstName)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=I.firstName)||void 0===t?void 0:t.type)&&"Have to be alphabet."},k("firstName",{pattern:/^[A-Za-z]+$/i})),{},{fullWidth:!0,id:"firstName",label:"First Name"}))}),Object(m.jsx)(C.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)(L.a,Object(i.a)({error:"pattern"===(null===(n=I.lastName)||void 0===n?void 0:n.type)&&!0,helperText:"pattern"===(null===(r=I.lastName)||void 0===r?void 0:r.type)&&"Have to be alphabet.",fullWidth:!0,id:"lastName",label:"Last Name"},k("lastName",{pattern:/^[A-Za-z]+$/i})))}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)({error:"pattern"===(null===(c=I.email)||void 0===c?void 0:c.type)&&!0,helperText:"pattern"===(null===(o=I.email)||void 0===o?void 0:o.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},k("email",{pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)({error:"minLength"===(null===(s=I.phone)||void 0===s?void 0:s.type)&&!0,helperText:"minLength"===(null===(j=I.phone)||void 0===j?void 0:j.type)&&"Input at least 6 digit.",fullWidth:!0,id:"phone",label:"Phone number"},k("phone",{minLength:6})))}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({error:"minLength"===(null===(b=I.password)||void 0===b?void 0:b.type)&&!0,helperText:"minLength"===(null===(p=I.password)||void 0===p?void 0:p.type)&&"At least 6 charactor long.",fullWidth:!0},k("password",{minLength:6})),{},{label:"Password",type:"password",id:"password"}))}),Object(m.jsx)(C.a,{item:!0,xs:12,children:Object(m.jsx)(L.a,Object(i.a)(Object(i.a)({error:"pattern"===(null===(h=I.photoURL)||void 0===h?void 0:h.type)&&!0,helperText:"pattern"===(null===(x=I.photoURL)||void 0===x?void 0:x.type)&&"Pls input valid url.",fullWidth:!0},k("photoURL",{pattern:/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi})),{},{label:"Avatar URL",type:"photoURL",id:"photoURL"}))})]}),Object(m.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"update"})]})]})]})})}var tt=n(156),nt=n.n(tt),at=n(325),rt=n(307),ct=n(306);function ot(e){var t=e.children,n=e.window,a=Object(ct.a)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return Object(m.jsx)(rt.a,{in:a,children:Object(m.jsx)(We.a,{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}function it(){return Object(m.jsx)(z.a,{children:Object(m.jsxs)(E.a,{sx:{maxWidth:480,margin:"auto",textAlign:"center"},children:[Object(m.jsx)(T.a,{variant:"h3",paragraph:!0,children:"Sorry, page not found!"}),Object(m.jsx)(T.a,{sx:{color:"text.secondary"},children:"Sorry, we couldn\u2019t find the page you\u2019re looking for. Perhaps you\u2019ve mistyped the URL? Be sure to check your spelling."}),Object(m.jsx)(E.a,{component:"img",src:"/illustration_404.svg",sx:{height:260,mx:"auto",my:{xs:5,sm:10}}}),Object(m.jsx)(S.a,{to:"/",size:"large",variant:"contained",component:g.b,children:"Go to Home"})]})})}var st=function(e){var t=e.props;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(f,{children:[Object(m.jsx)(A.a,{}),Object(m.jsx)("div",{id:"back-to-top-anchor"}),Object(m.jsx)(Ye,{}),Object(m.jsxs)(z.a,{maxWidth:"sm",style:{marginTop:80},children:[Object(m.jsxs)(v.d,{children:[Object(m.jsx)(Me,{exact:!0,path:"/",component:qe}),Object(m.jsx)(Me,{path:"/profile",component:et}),Object(m.jsx)(v.b,{path:"/signup",component:K}),Object(m.jsx)(v.b,{path:"/login",component:U}),Object(m.jsx)(v.b,{path:"/forgot-password",component:$}),Object(m.jsx)(v.b,{path:"/*",component:it})]}),Object(m.jsx)(ot,Object(i.a)(Object(i.a)({},t),{},{children:Object(m.jsx)(at.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(m.jsx)(nt.a,{})})}))]})]})})},lt=n(94),ut=n(157),dt=n(158),jt=Object(lt.combineReducers)({message:k,bookings:ue}),bt=Object(lt.createStore)(jt,Object(ut.composeWithDevTools)(Object(lt.applyMiddleware)(dt.a)));o.a.render(Object(m.jsx)(w.a,{store:bt,children:Object(m.jsx)(g.a,{children:Object(m.jsx)(st,{})})}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.e9b1b278.chunk.js.map