(this["webpackJsonplawn-mowing-website-frontend-2021"]=this["webpackJsonplawn-mowing-website-frontend-2021"]||[]).push([[0],{223:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(61),o=n.n(c),i=n(26),s=n(2),l=n.n(s),u=n(5),d=n(62),j=n(13),b=n(125),p=(n(188),n(224),b.a.initializeApp({apiKey:"AIzaSyDxuQBc8Xu5uPvgH-ohhrb9sG5FVypt-aQ",authDomain:"auth-dev-53c9b.firebaseapp.com",projectId:"auth-dev-53c9b",storageBucket:"auth-dev-53c9b.appspot.com",messagingSenderId:"963517141086",appId:"1:963517141086:web:96690c9cd16ce40ef6a4cf"}).auth()),h=n(1),m=r.a.createContext();function x(){return Object(a.useContext)(m)}function O(e){var t=e.children,n=Object(a.useState)(),r=Object(j.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!0),s=Object(j.a)(i,2),l=s[0],u=s[1];Object(a.useEffect)((function(){var e=p.onAuthStateChanged((function(e){o(e),u(!1)}));return e}),[]);var d={currentUser:c,signup:function(e,t){return p.createUserWithEmailAndPassword(e,t)},login:function(e,t){return p.signInWithEmailAndPassword(e,t)},logout:function(){return p.signOut()},forgotPassword:function(e){return p.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)},signInWithGoogleAccount:function(){var e=new b.a.auth.GoogleAuthProvider;return p.signInWithPopup(e)}};return Object(h.jsx)(m.Provider,{value:d,children:!l&&t})}var f=n(33),v=n(52),g=n(44),w=function(e,t){return function(n){n({type:"SET_MESSAGE",message:{show:!0,type:e.type,text:e.text}}),setTimeout((function(){n({type:"SET_MESSAGE",message:{show:!1,type:e.type,text:e.text}})}),1e3*t),clearTimeout(undefined)}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_MESSAGE"===t.type?t.message:e},k=n(321),N=n(330),S=n(296),A=n(312),L=n(313),I=n(322),C=n(297),E=n(329),T=n(327),W=n(130),P=n(325),z=n(333),D=n(334),U=n(153),B=n.n(U),G=n(60),R=n.n(G),_=null,Z=function(e){_="bearer ".concat(e)},V="/api/users",q=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:_}},e.next=3,R.a.get(V,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post(V,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={getAll:q,create:M,update:function(e){var t={headers:{Authorization:_}};return R.a.put(V,e,t).then((function(e){return e.data}))},remove:function(e){return R.a.delete("".concat(V,"/").concat(e)).then((function(e){return e.data}))}},H=Object(W.a)();function K(){var e,t,n,a,r=Object(g.b)(),c=Object(d.a)(),o=c.handleSubmit,s=c.register,j=c.formState.errors,b=x(),p=b.login,m=b.signInWithGoogleAccount,O=Object(f.g)(),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t.email,t.password);case 3:n=e.sent,console.log("login good!",n),r(w({type:"success",text:"login good!"},5)),O.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(w({type:"error",text:"The password is invalid or the user does not have a password."},5));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:if(!(t=e.sent).additionalUserInfo.isNewUser){e.next=9;break}return console.log("isNewUser"),n=t.additionalUserInfo.profile,e.next=9,F.create({uid:t.user.uid,email:n.email,firstName:n.given_name,lastName:n.family_name});case 9:r(w({type:"success",text:"login good!"},5)),O.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(P.a,{theme:H,children:Object(h.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(S.a,{}),Object(h.jsxs)(C.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(h.jsx)(k.a,{sx:{m:1,bgcolor:"primary.main"}}),Object(h.jsx)(E.a,{component:"h1",variant:"h5",children:"Login"}),Object(h.jsx)(N.a,{onClick:W,variant:"outlined",startIcon:Object(h.jsx)(B.a,{}),children:"Login with Google"}),Object(h.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:o(y),sx:{mt:3},children:[Object(h.jsxs)(I.a,{container:!0,spacing:2,children:[Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)({error:"pattern"===(null===(e=j.email)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=j.email)||void 0===t?void 0:t.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},s("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(h.jsxs)(I.a,{item:!0,xs:12,children:[Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({error:"minLength"===(null===(n=j.password)||void 0===n?void 0:n.type)&&!0,helperText:"minLength"===(null===(a=j.password)||void 0===a?void 0:a.type)&&"At least 6 characters long.",fullWidth:!0},s("password",{required:!0,minLength:6})),{},{label:"Password",type:"password",id:"password"})),Object(h.jsx)(z.a,{component:v.b,to:"/forgot-password",children:"Forgot Password?"})]}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(D.a,{control:Object(h.jsx)(L.a,{value:"allowExtraEmails",color:"primary"}),label:"Remember me"})})]}),Object(h.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Login"}),Object(h.jsx)(I.a,{container:!0,justifyContent:"flex-end",children:Object(h.jsx)(I.a,{item:!0,children:Object(h.jsx)(z.a,{component:v.b,to:"/signup",children:"Need an account? Sign up"})})})]})]})]})})}var $=Object(W.a)();function J(){var e,t,n,a,r,c,o,s,j=Object(g.b)(),b=x().signup,p=Object(d.a)(),m=p.handleSubmit,O=p.register,y=p.formState.errors,L=Object(f.g)(),W=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t.email,t.password);case 3:return n=e.sent,e.next=6,F.create({uid:n.user.uid,email:t.email,firstName:t.firstName,lastName:t.lastName});case 6:j(w({type:"success",text:"Sign up successful!"},5)),L.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j(w({type:"error",text:"The email address is already in use by another account."},5));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(P.a,{theme:$,children:Object(h.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(S.a,{}),Object(h.jsxs)(C.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(h.jsx)(k.a,{sx:{m:1,bgcolor:"secondary.main"}}),Object(h.jsx)(E.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(h.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:m(W),sx:{mt:3},children:[Object(h.jsxs)(I.a,{container:!0,spacing:2,children:[Object(h.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({error:"pattern"===(null===(e=y.firstName)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=y.firstName)||void 0===t?void 0:t.type)&&"Have to be alphabet."},O("firstName",{required:!0,pattern:/^[A-Za-z]+$/i})),{},{fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0}))}),Object(h.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(h.jsx)(A.a,Object(i.a)({error:"pattern"===(null===(n=y.lastName)||void 0===n?void 0:n.type)&&!0,helperText:"pattern"===(null===(a=y.lastName)||void 0===a?void 0:a.type)&&"Have to be alphabet.",required:!0,fullWidth:!0,id:"lastName",label:"Last Name"},O("lastName",{required:!0,pattern:/^[A-Za-z]+$/i})))}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)({error:"pattern"===(null===(r=y.email)||void 0===r?void 0:r.type)&&!0,helperText:"pattern"===(null===(c=y.email)||void 0===c?void 0:c.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},O("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({error:"minLength"===(null===(o=y.password)||void 0===o?void 0:o.type)&&!0,helperText:"minLength"===(null===(s=y.password)||void 0===s?void 0:s.type)&&"At least 6 characters long.",fullWidth:!0},O("password",{required:!0,minLength:6})),{},{label:"Password",type:"password",id:"password"}))})]}),Object(h.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(h.jsx)(I.a,{container:!0,justifyContent:"flex-end",children:Object(h.jsx)(I.a,{item:!0,children:Object(h.jsx)(v.b,{to:"/login",children:Object(h.jsx)(z.a,{variant:"body2",children:"Already have an account? Sign in"})})})})]})]})]})})}var Q=Object(W.a)();function Y(){var e,t,n=Object(d.a)(),a=n.handleSubmit,r=n.register,c=n.formState.errors,o=x().forgotPassword,s=Object(f.g)(),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t.email);case 3:n=e.sent,console.log("ok",n),s.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(P.a,{theme:Q,children:Object(h.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(S.a,{}),Object(h.jsxs)(C.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(h.jsx)(k.a,{sx:{m:1,bgcolor:"primary.main"}}),Object(h.jsx)(E.a,{component:"h1",variant:"h5",children:"Reset password"}),Object(h.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:a(j),sx:{mt:3},children:[Object(h.jsx)(I.a,{container:!0,spacing:2,children:Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)({error:"pattern"===(null===(e=c.email)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=c.email)||void 0===t?void 0:t.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},r("email",{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))})}),Object(h.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"reset password"})]})]})]})})}var X=n(85),ee=n(131),te=n(154),ne=n(306),ae=n(311),re=n(305),ce=n(304),oe="/api/bookings",ie=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(oe);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(oe,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:_}},e.next=3,R.a.post(oe,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.put("".concat(oe,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.delete("".concat(oe,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je={getAll:ie,create:le,update:ue,remove:de,getById:se};function be(e){return{type:"INIT_BOOKINGS",bookings:e}}function pe(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.remove(e);case 2:a=t.sent,console.log(a),n({type:"REMOVE_BOOKING",removeBookingId:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function he(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.create(e);case 2:a=t.sent,n({type:"NEW_BOOKING",newBooking:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BOOKINGS":return t.bookings;case"NEW_BOOKING":return e.concat(t.newBooking);case"REMOVE_BOOKING":return e.filter((function(e){return e.id!==t.removeBookingId}));default:return e}};function xe(e){var t=e.handleHideAddBookingButton,n=Object(g.b)(),r=Object(a.useState)(new Date(Date.now()+864e5)),c=Object(j.a)(r,2),o=c[0],s=c[1],b=Object(d.a)(),p=b.register,m=b.setValue,x=b.reset,O=b.handleSubmit,f=b.watch,v=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=2;break}return e.abrupt("return",n(w({type:"warning",text:"Please check at least one service!"},5)));case 2:a={address:t.address,bookingNote:t.bookingNote,bookingDate:t.bookingDate,serviceItem:k.map((function(e){var n=e.name,a=e.noteName;if(t[n])return{item:e.name,serviceComment:t[a]}})).filter((function(e){return void 0!==e}))},n(he(a)),n(w({type:"success",text:"Create new booking OK!!"},5)),E();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(te.usePlacesWidget)({apiKey:"AIzaSyBBlILNR1xPhaLTiQxXvK4uP_YkayR4Pcc",options:{types:["address"],fields:["formatted_address"],componentRestrictions:{country:"nz"}}}).ref,k=[{label:"Lawn Mowing",name:"lawnMowing",noteName:"noteLawnMowing"},{label:"Garbage Collect",name:"garbageCollect",noteName:"noteGarbageCollect"},{label:"Gardening",name:"gardening",noteName:"noteGardening"},{label:"Landscaping",name:"landscaping",noteName:"noteLandscaping"},{label:"Gutter Clean",name:"gutterCleansing",noteName:"noteGutterCleansing"},{label:"Trimming & Pruning",name:"trimmingPruning",noteName:"noteTrimmingPruning"}],S=function(e){return f(e,!1)},I=!!f(k.map((function(e){return e.name}))).includes(void 0)||f(k.map((function(e){return e.name})),!1).every((function(e){return!1===e})),E=function(){x(),t()};return Object(h.jsx)(ce.b,{dateAdapter:re.a,children:Object(h.jsx)(C.a,{sx:{display:"flex",flexWrap:"wrap","& > :not(style)":{m:2,width:1}},children:Object(h.jsx)("form",{onSubmit:O(v),children:Object(h.jsxs)(ne.a,{spacing:1,children:[Object(h.jsx)(ae.a,Object(i.a)(Object(i.a)({renderInput:function(e){return Object(h.jsx)(A.a,Object(i.a)({},e))},label:"Date&Time picker",value:o},p("bookingDate",{required:!0})),{},{onChange:function(e){m("bookingDate",e.format()),s(e.format())}})),Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({},p("address",{required:!0})),{},{inputProps:{ref:y},label:"Where to service",variant:"outlined"})),k.map((function(e,t){return Object(h.jsxs)(ne.a,{direction:"row",spacing:2,alignItems:"flex-start",children:[Object(h.jsx)(D.a,Object(i.a)(Object(i.a)({checked:S(e.name)||!1},p(e.name)),{},{label:e.label,control:Object(h.jsx)(L.a,{})})),S(e.name)&&Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({},p(e.noteName)),{},{variant:"outlined",label:"Notes for ".concat(e.label,"(Optional)")}))]},t)})),Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({},p("bookingNote")),{},{id:"bookingNote",variant:"outlined"})),Object(h.jsxs)(ne.a,{direction:"row",spacing:2,justifyContent:"center",children:[Object(h.jsx)(N.a,{type:"submit",variant:"contained",color:"success",children:"Add"}),Object(h.jsx)(N.a,{variant:"contained",color:"error",onClick:E,children:"Cancel"})]})]})})})})}var Oe=n(4),fe=n(10),ve=n(336),ge=n(337),we=n(338),ye=n(339),ke=n(340),Ne=n(335),Se=n(157),Ae=n.n(Se),Le=n(316),Ie=n(308),Ce=n(332),Ee=n(317),Te=n(324),We=n(156),Pe=n.n(We),ze=n(78),De=n(95),Ue=n.n(De),Be=n(320),Ge=n(307),Re=[{value:"date",label:"Date"},{value:"name",label:"Worker Name"},{value:"address",label:"Address"}],_e=[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}];function Ze(e){var t=e.handleSearch,n=e.handleSort,r=Object(a.useState)("desc"),c=Object(j.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)("date"),l=Object(j.a)(s,2),u=l[0],d=l[1];return Object(h.jsxs)(Ge.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:.8}},noValidate:!0,autoComplete:"off",children:[Object(h.jsx)(A.a,{id:"outlined-basic",label:"Search address",variant:"outlined",onChange:function(e){return t(e.target.value)}}),Object(h.jsx)(A.a,{id:"outlined-select-currency",select:!0,label:"Order by",value:u,onChange:function(e){d(e.target.value),n(o,e.target.value)},children:Re.map((function(e){return Object(h.jsx)(Be.a,{value:e.value,children:e.label},e.value)}))}),Object(h.jsx)(A.a,{id:"outlined-select-currency",select:!0,label:"Order",value:o,onChange:function(e){i(e.target.value),n(e.target.value,u)},children:_e.map((function(e){return Object(h.jsx)(Be.a,{value:e.value,children:e.label},e.value)}))})]})}var Ve=["expand"],qe=Object(fe.a)((function(e){e.expand;var t=Object(X.a)(e,Ve);return Object(h.jsx)(Ne.a,Object(i.a)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));function Me(){var e=Object(a.useState)({search:"",sort:"desc",sortBy:"date"}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(g.c)((function(e){var t;return t="desc"===n.sort?function(e){return e.sort((function(e,t){return new Date(t.bookingDate)-new Date(e.bookingDate)}))}(e.bookings):function(e){return e.sort((function(e,t){return new Date(e.bookingDate)-new Date(t.bookingDate)}))}(e.bookings),""!==n.search&&n.search.length>1?t.filter((function(e){return e.address.toLowerCase().includes(n.search)})):t}));console.log(c);var o=Object(g.b)(),s=Object(a.useState)(!1),d=Object(j.a)(s,2),b=d[0],p=d[1],m=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to cancel this booking?")){e.next=6;break}return e.next=3,je.remove(t);case 3:n=e.sent,o(pe(t)),o(w({type:"success",text:n.message},5));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e,t,n){if("completed"===t)return Object(h.jsx)(Le.a,{onChange:function(t,n){return function(e,t){je.update(e,{rating:t}).then((function(e){o(w({type:"success",text:"Your rating has been updated!"},5))})).catch((function(e){console.log(e)}))}(e,n)},name:"half-rating",defaultValue:n,precision:.5})},O=function(e){var t;switch(console.log(e),e){case"pending":t="primary";break;case"completed":t="secondary";break;case"approved":t="success";break;case"declined":t="error"}return Object(h.jsx)(Te.a,{label:e,color:t,variant:"filled"})};return Object(h.jsxs)("div",{children:[Object(h.jsx)(Ze,{handleSearch:function(e){""!==e&&r(Object(i.a)(Object(i.a)({},n),{},{search:e}))},handleSort:function(e,t){console.log(e,t),r(Object(i.a)(Object(i.a)({},n),{},{sort:e,sortBy:t}))}}),Object(h.jsxs)(Ce.a,{children:[Object(h.jsx)("h2",{children:"Booking List"}),0===c.length&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ge.a,{component:"img",src:"/not-found.svg",sx:{height:230,width:2/3,mb:2}}),Object(h.jsx)(E.a,{sx:{mb:2},variant:"body2",children:"No booking added..."})]}),c.map((function(e,t){return Object(h.jsx)(Ee.a,{children:Object(h.jsxs)(ve.a,{sx:{width:1},children:[Object(h.jsx)(ge.a,{action:Object(h.jsx)(Ne.a,{"aria-label":"delete",onClick:function(){return m(e.id)},children:Object(h.jsx)(Pe.a,{sx:{color:ze.a[600]}})}),title:Ue()(e.bookingDate).format("LL"),subheader:Ue()(e.bookingDate).format("LT")}),Object(h.jsx)(we.a,{children:Object(h.jsxs)(E.a,{paragraph:!0,children:[e.address," "]})}),Object(h.jsxs)(ye.a,{children:[Object(h.jsxs)(ne.a,{direction:"row",spacing:2,children:[O(e.status),x(e.id,e.status,e.rating)]}),Object(h.jsx)(qe,{expand:b[t],onClick:function(){return e=t,void p(Object(i.a)(Object(i.a)({},b),{},Object(Oe.a)({},e,!b[e])));var e},"aria-expanded":b[t],"aria-label":"show more",children:Object(h.jsx)(Ae.a,{})})]}),Object(h.jsx)(ke.a,{in:b[t],timeout:"auto",unmountOnExit:!0,children:Object(h.jsxs)(we.a,{children:[Object(h.jsx)(E.a,{paragraph:!0,children:"Services you picked:"}),e.serviceItem.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)(E.a,{variant:"overline",paragraph:!0,children:e.item}),Object(h.jsx)(E.a,{variant:"body2",paragraph:!0,children:e.serviceComment})]},e.item)})),e.bookingNote&&(n=e.bookingNote,Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ie.a,{}),Object(h.jsx)(E.a,{paragraph:!0,children:"Your Note on Booking:"}),n]})),0!==e.worker.length&&Object(h.jsxs)(E.a,{variant:"body2",color:"text.secondary",align:"right",children:["Worker: ",e.worker.join(", ")]}),e.adminComment&&Object(h.jsxs)(E.a,{paragraph:!0,children:["Admin comment:",e.adminComment]})]})})]})},t);var n}))]})]})}var Fe=n(331),He=n(158),Ke=n.n(He),$e=Object(ee.a)(),Je={minHeight:600,width:360,margin:"20px auto",textAlign:"center"};function Qe(){var e=x().currentUser,t=Object(g.b)(),n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!0),s=Object(j.a)(i,2),d=s[0],b=s[1];Object(a.useEffect)((function(){function n(){return(n=Object(u.a)(l.a.mark((function n(){var a,r,c,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getIdToken();case 2:return a=n.sent,Z(a),n.next=6,F.getAll();case 6:return r=n.sent,c=r.bookings,o=Object(X.a)(r,["bookings"]),t(be(c)),window.localStorage.setItem("userInfo",JSON.stringify(o)),n.next=12,Object(ee.b)($e.currentUser,{displayName:r.firstName,photoURL:r.photoURL});case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,t]);return Object(h.jsx)("div",{children:Object(h.jsxs)(Fe.a,{elevation:3,style:Je,children:[d&&Object(h.jsx)(N.a,{onClick:function(){b(!1),o(!0)},color:"success",sx:{m:2},variant:"contained",endIcon:Object(h.jsx)(Ke.a,{}),children:"add booking"}),Object(h.jsx)(ke.a,{in:c,children:Object(h.jsx)(xe,{handleHideAddBookingButton:function(){b(!d),o(!c)}})}),Object(h.jsx)(Me,{})]})})}function Ye(e){var t=e.component,n=Object(X.a)(e,["component"]),a=x().currentUser;return Object(h.jsx)(f.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return a?Object(h.jsx)(t,Object(i.a)({},e)):Object(h.jsx)(f.a,{to:"/login"})}}))}var Xe=n(341),et=n(342),tt=n(162),nt=n(314),at=n(318),rt=function(){var e=Object(g.c)((function(e){return e.message})),t=null===e||void 0===e?void 0:e.show,n=null===e||void 0===e?void 0:e.text,a=null===e||void 0===e?void 0:e.type;return Object(h.jsx)(at.a,{open:t,children:Object(h.jsx)(nt.a,{severity:a,sx:{width:"100%"},children:n})})};function ct(){var e,t=x(),n=t.currentUser,a=t.logout,c=r.a.useState(null),o=Object(j.a)(c,2),i=o[0],s=o[1],d=Object(f.g)();function b(){return(b=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),e.prev=1,e.next=4,a();case 4:d.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(h.jsx)(Ge.a,{sx:{flexGrow:1},children:Object(h.jsxs)(Xe.a,{children:[Object(h.jsxs)(et.a,{children:[Object(h.jsx)(Ne.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(h.jsx)(E.a,{onClick:function(){return d.push("/")},variant:"h6",component:"div",sx:{flexGrow:1},children:"Bookings"}),n&&Object(h.jsxs)("div",{children:[Object(h.jsx)(Ne.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:Object(h.jsx)(E.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:(null===n||void 0===n?void 0:n.photoURL)?Object(h.jsx)(k.a,{src:n.photoURL}):Object(h.jsx)(k.a,{children:null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e.charAt(0).toUpperCase()})})}),Object(h.jsxs)(tt.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(i),onClose:function(){s(null)},children:[Object(h.jsx)(Be.a,{onClick:function(){s(null),d.push("/profile")},children:"Profile"}),Object(h.jsx)(Be.a,{onClick:function(){return b.apply(this,arguments)},children:"Logout"})]})]})]}),Object(h.jsx)(rt,{})]})})}var ot=Object(W.a)();function it(){var e,t,n,r,c,o,s,j,b,p,m,O,v=x(),y=(v.currentUser,v.updateEmail),L=v.updatePassword,W=Object(d.a)(),z=W.handleSubmit,D=W.register,U=W.formState.errors,B=W.setValue,G=Object(f.g)(),R=Object(g.b)();Object(a.useEffect)((function(){var e=window.localStorage.getItem("userInfo"),t=JSON.parse(e);console.log("userInfo",t),B("firstName",t.firstName),B("lastName",t.lastName),B("phone",t.phone),B("email",t.email),B("lastName",t.lastName),B("photoURL",t.photoURL)}),[B]);var _=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("edit profile form data",t),e.next=4,y(t.email);case 4:return e.next=6,L(t.password);case 6:return e.next=8,F.update({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,photoURL:t.photoURL});case 8:R(w({type:"success",text:"profile updated!"},5)),G.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),R(w({type:"error",text:"Failed, check console whats wrong..."},5)),console.log("edit profile",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(P.a,{theme:ot,children:Object(h.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(S.a,{}),Object(h.jsxs)(C.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(h.jsx)(k.a,{sx:{m:1,bgcolor:"secondary.main"}}),Object(h.jsx)(E.a,{component:"h1",children:"Profile"}),Object(h.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:z(_),sx:{mt:3},children:[Object(h.jsxs)(I.a,{container:!0,spacing:2,children:[Object(h.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({error:"pattern"===(null===(e=U.firstName)||void 0===e?void 0:e.type)&&!0,helperText:"pattern"===(null===(t=U.firstName)||void 0===t?void 0:t.type)&&"Have to be alphabet."},D("firstName",{pattern:/^[A-Za-z]+$/i})),{},{fullWidth:!0,id:"firstName",label:"First Name"}))}),Object(h.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(h.jsx)(A.a,Object(i.a)({error:"pattern"===(null===(n=U.lastName)||void 0===n?void 0:n.type)&&!0,helperText:"pattern"===(null===(r=U.lastName)||void 0===r?void 0:r.type)&&"Have to be alphabet.",fullWidth:!0,id:"lastName",label:"Last Name"},D("lastName",{pattern:/^[A-Za-z]+$/i})))}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)({error:"pattern"===(null===(c=U.email)||void 0===c?void 0:c.type)&&!0,helperText:"pattern"===(null===(o=U.email)||void 0===o?void 0:o.type)&&"Email is not well formatted.",fullWidth:!0,id:"email",label:"Email Address"},D("email",{pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})))}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)({error:"minLength"===(null===(s=U.phone)||void 0===s?void 0:s.type)&&!0,helperText:"minLength"===(null===(j=U.phone)||void 0===j?void 0:j.type)&&"Input at least 6 digit.",fullWidth:!0,id:"phone",label:"Phone number"},D("phone",{minLength:6})))}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({error:"minLength"===(null===(b=U.password)||void 0===b?void 0:b.type)&&!0,helperText:"minLength"===(null===(p=U.password)||void 0===p?void 0:p.type)&&"At least 6 charactor long.",fullWidth:!0},D("password",{minLength:6})),{},{label:"Password",type:"password",id:"password"}))}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(A.a,Object(i.a)(Object(i.a)({error:"pattern"===(null===(m=U.photoURL)||void 0===m?void 0:m.type)&&!0,helperText:"pattern"===(null===(O=U.photoURL)||void 0===O?void 0:O.type)&&"Pls input valid url.",fullWidth:!0},D("photoURL",{pattern:/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi})),{},{label:"Avatar URL",type:"photoURL",id:"photoURL"}))})]}),Object(h.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"update"})]})]})]})})}var st=n(159),lt=n.n(st),ut=n(328),dt=n(310),jt=n(309);function bt(e){var t=e.children,n=e.window,a=Object(jt.a)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return Object(h.jsx)(dt.a,{in:a,children:Object(h.jsx)(Ge.a,{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",sx:{position:"fixed",bottom:16,right:16},children:t})})}function pt(){return Object(h.jsx)(T.a,{children:Object(h.jsxs)(C.a,{sx:{maxWidth:480,margin:"auto",textAlign:"center"},children:[Object(h.jsx)(E.a,{variant:"h3",paragraph:!0,children:"Sorry, page not found!"}),Object(h.jsx)(E.a,{sx:{color:"text.secondary"},children:"Sorry, we couldn\u2019t find the page you\u2019re looking for. Perhaps you\u2019ve mistyped the URL? Be sure to check your spelling."}),Object(h.jsx)(C.a,{component:"img",src:"/illustration_404.svg",sx:{height:260,mx:"auto",my:{xs:5,sm:10}}}),Object(h.jsx)(N.a,{to:"/",size:"large",variant:"contained",component:v.b,children:"Go to Home"})]})})}var ht=function(e){var t=e.props;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(O,{children:[Object(h.jsx)(S.a,{}),Object(h.jsx)("div",{id:"back-to-top-anchor"}),Object(h.jsx)(ct,{}),Object(h.jsxs)(T.a,{maxWidth:"sm",style:{marginTop:80},children:[Object(h.jsxs)(f.d,{children:[Object(h.jsx)(Ye,{exact:!0,path:"/",component:Qe}),Object(h.jsx)(Ye,{path:"/profile",component:it}),Object(h.jsx)(f.b,{path:"/signup",component:J}),Object(h.jsx)(f.b,{path:"/login",component:K}),Object(h.jsx)(f.b,{path:"/forgot-password",component:Y}),Object(h.jsx)(f.b,{path:"/*",component:pt})]}),Object(h.jsx)(bt,Object(i.a)(Object(i.a)({},t),{},{children:Object(h.jsx)(ut.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(h.jsx)(lt.a,{})})}))]})]})})},mt=n(96),xt=n(160),Ot=n(161),ft=Object(mt.combineReducers)({message:y,bookings:me}),vt=Object(mt.createStore)(ft,Object(xt.composeWithDevTools)(Object(mt.applyMiddleware)(Ot.a)));o.a.render(Object(h.jsx)(g.a,{store:vt,children:Object(h.jsx)(v.a,{children:Object(h.jsx)(ht,{})})}),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.983a6d8b.chunk.js.map