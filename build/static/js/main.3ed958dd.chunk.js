(this["webpackJsonplawn-mowing-website-frontend-2021"]=this["webpackJsonplawn-mowing-website-frontend-2021"]||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(16),c=n.n(a),u=n(2),s=n.n(u),i=n(4),o=n(3),j=n(5),l=n.n(j),b="/api/guests",h={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(b);case 2:return t=e.sent,e.abrupt("return",t.then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(b,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return l.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},d=n(0),p=function(e){var t=e.handleNewQuote,n=Object(r.useState)(!1),a=Object(o.a)(n,2),c=a[0],u=a[1],j=Object(r.useState)(!1),l=Object(o.a)(j,2),b=l[0],p=l[1],f=Object(r.useState)(!1),O=Object(o.a)(f,2),v=O[0],x=O[1],g=Object(r.useState)(""),m=Object(o.a)(g,2),w=m[0],S=m[1],k=Object(r.useState)(""),C=Object(o.a)(k,2),y=C[0],D=C[1],F=Object(r.useState)(""),A=Object(o.a)(F,2),U=A[0],q=A[1],I=Object(r.useState)(""),L=Object(o.a)(I,2),R=L[0],J=L[1],N=Object(r.useState)(""),Q=Object(o.a)(N,2),T=Q[0],B=Q[1],E=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,h.create({address:w,name:y,phone:U,email:R}).then((function(e){return e.data}));case 3:r=e.sent,a=[c&&"Lawn mowing",b&&"Gardening",v&&"Rubbish Removal"].filter(Boolean).map((function(e){return{item:e}})),t({serviceItem:a,comment:T,guestId:r.id}),D(""),S(""),q(""),J(""),B("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:E,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"choice service"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsxs)("label",{children:["lawn mowing",Object(d.jsx)("input",{name:"lawn_mowing",type:"checkbox",checked:c,onChange:function(){return u(!c)}})]})}),Object(d.jsx)("li",{children:Object(d.jsxs)("label",{children:["Gardening and landscaping",Object(d.jsx)("input",{name:"gardening",type:"checkbox",checked:b,onChange:function(){return p(!b)}})]})}),Object(d.jsx)("li",{children:Object(d.jsxs)("label",{children:["Rubbish Removal",Object(d.jsx)("input",{name:"rubbish_removal",type:"checkbox",checked:v,onChange:function(){return x(!v)}})]})})]})]}),Object(d.jsxs)("div",{children:["Service at",Object(d.jsx)("input",{value:w,onChange:function(e){var t=e.target;return S(t.value)}})]}),Object(d.jsxs)("div",{children:["name",Object(d.jsx)("input",{value:y,onChange:function(e){var t=e.target;return D(t.value)}})]}),Object(d.jsxs)("div",{children:["phone",Object(d.jsx)("input",{value:U,onChange:function(e){var t=e.target;return q(t.value)}})]}),Object(d.jsxs)("div",{children:["email",Object(d.jsx)("input",{value:R,onChange:function(e){var t=e.target;return J(t.value)}})]}),Object(d.jsxs)("div",{children:["comment",Object(d.jsx)("input",{value:T,onChange:function(e){var t=e.target;return B(t.value)}})]}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]})})},f=function(e){var t=e.handleUserLogin,n=Object(r.useState)(""),a=Object(o.a)(n,2),c=a[0],u=a[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),j=i[0],l=i[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({username:c,password:j})},children:[Object(d.jsxs)("div",{children:["username: ",Object(d.jsx)("input",{value:c,onChange:function(e){var t=e.target;return u(t.value)}})]}),Object(d.jsxs)("div",{children:["password: ",Object(d.jsx)("input",{value:j,onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(d.jsx)("button",{children:"login"})]})]})},O=function(e){var t=e.message;return Object(d.jsx)(d.Fragment,{children:t})},v=function(e){var t=e.handleCreateUser,n=Object(r.useState)(""),a=Object(o.a)(n,2),c=a[0],u=a[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),j=i[0],l=i[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),p=h[0],f=h[1],O=Object(r.useState)(""),v=Object(o.a)(O,2),x=v[0],g=v[1],m=Object(r.useState)(""),w=Object(o.a)(m,2),S=w[0],k=w[1],C=Object(r.useState)(""),y=Object(o.a)(C,2),D=y[0],F=y[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Sign up"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({username:c,password:j,name:p,address:x,phone:S,email:D})},children:[Object(d.jsxs)("div",{children:["username:",Object(d.jsx)("input",{value:c,onChange:function(e){var t=e.target;return u(t.value)}})]}),Object(d.jsxs)("div",{children:["password:",Object(d.jsx)("input",{value:j,onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(d.jsxs)("div",{children:["name:",Object(d.jsx)("input",{value:p,onChange:function(e){var t=e.target;return f(t.value)}})]}),Object(d.jsxs)("div",{children:["address:",Object(d.jsx)("input",{value:x,onChange:function(e){var t=e.target;return g(t.value)}})]}),Object(d.jsxs)("div",{children:["phone:",Object(d.jsx)("input",{value:S,onChange:function(e){var t=e.target;return k(t.value)}})]}),Object(d.jsxs)("div",{children:["email:",Object(d.jsx)("input",{value:D,onChange:function(e){var t=e.target;return F(t.value)}})]}),Object(d.jsx)("button",{children:"sign up"})]})]})},x="/api/quotes",g=null,m={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(x).then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,l.a.post(x,t,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return l.a.put("".concat(x,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(x,"/").concat(e)).then((function(e){return e.data}))},setToken:function(e){g="bearer ".concat(e)}},w="/api/clients",S={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(w);case 2:return t=e.sent,e.abrupt("return",t.then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(w,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return l.a.put("".concat(w,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(w,"/").concat(e)).then((function(e){return e.data}))}},k={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("guest-quote"),u=Object(o.a)(c,2),j=u[0],l=u[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),x=h[0],g=h[1],w=Object(r.useState)([]),C=Object(o.a)(w,2),y=C[0],D=C[1];Object(r.useEffect)((function(){m.getAll().then((function(e){console.log("fetching data..."),n&&(console.log(e.filter((function(e){return e.user===n.username}))),D([]))}))}),[n]);var F=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.create(t).then((function(e){return e.data}));case 3:g("quote submitted"),setTimeout((function(){g("")}),3e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.create(t).then((function(e){alert("hi ".concat(e.data.name," you are signed up, login pls")),l("login")})).catch((function(){return alert("Fail, user duplicated")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.login(t).then((function(e){a(e),window.localStorage.setItem("loggedUser",JSON.stringify(n)),l("clientDash")})).catch((function(){return alert("pass or username incorrect!!!")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return"signup"===j?Object(d.jsx)(v,{handleCreateUser:A}):"login"===j?Object(d.jsx)(f,{handleUserLogin:U}):"clientDash"===j?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(O,{message:"Hi, ".concat(n.name," you are log in")}),Object(d.jsx)("button",{onClick:function(){return alert("under dev...")},children:"log out"}),Object(d.jsx)("h2",{children:"This is client client Dash"}),Object(d.jsx)("p",{children:"will show their past bookings, can be checked in console,currently no quote"}),Object(d.jsx)("div",{children:y})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return l("signup")},children:"sign up"}),Object(d.jsx)("button",{onClick:function(){return l("login")},children:"login"}),Object(d.jsx)("br",{}),Object(d.jsx)(O,{message:x}),Object(d.jsx)("h2",{children:"Quote"}),Object(d.jsx)(p,{handleNewQuote:F})]})};c.a.render(Object(d.jsx)(C,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.3ed958dd.chunk.js.map